<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>openQA and PowerPC -</title><meta name=description content="Due to recent changes in the worker configuration of the SUSE internal openQA instance, we needed to reconfigure some of the PowerPC jobs in openQA. This triggered a couple of questions regarding the availability of openQA worker, worker backends, their differences and their caveats. This blog post should act as a quickstart/overview guide for people getting into OpenQA testing on the PowerPC architecture."><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"openQA bites","url":"https:\/\/openQA-Bites.github.io\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/openQA-Bites.github.io\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/openQA-Bites.github.io\/","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/openQA-Bites.github.io\/posts\/2024\/2024-11-11-openqa_and_powerpc\/","name":"Open qa and power PC"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":"phoenix"},"headline":"openQA and PowerPC","description":"Due to recent changes in the worker configuration of the SUSE internal openQA instance, we needed to reconfigure some of the PowerPC jobs in openQA. This triggered a couple of questions regarding the availability of openQA worker, worker backends, their differences and their caveats. This blog post should act as a quickstart\/overview guide for people getting into OpenQA testing on the PowerPC architecture.\n","inLanguage":"en","wordCount":948,"datePublished":"2024-11-11T11:14:48\u002b01:00","dateModified":"2024-12-02T10:50:00\u002b01:00","image":"https:\/\/openQA-Bites.github.io\/img\/avatar-icon.png","keywords":["openqa, PowerPC"],"mainEntityOfPage":"https:\/\/openQA-Bites.github.io\/posts\/2024\/2024-11-11-openqa_and_powerpc\/","publisher":{"@type":"Organization","name":"https:\/\/openQA-Bites.github.io\/","logo":{"@type":"ImageObject","url":"https:\/\/openQA-Bites.github.io\/img\/avatar-icon.png","height":60,"width":60}}}</script><meta property="og:title" content="openQA and PowerPC"><meta property="og:description" content="Due to recent changes in the worker configuration of the SUSE internal openQA instance, we needed to reconfigure some of the PowerPC jobs in openQA. This triggered a couple of questions regarding the availability of openQA worker, worker backends, their differences and their caveats. This blog post should act as a quickstart/overview guide for people getting into OpenQA testing on the PowerPC architecture."><meta property="og:image" content="https://openQA-Bites.github.io/img/avatar-icon.png"><meta property="og:url" content="https://openQA-Bites.github.io/posts/2024/2024-11-11-openqa_and_powerpc/"><meta property="og:type" content="website"><meta property="og:site_name" content="openQA bites"><meta name=twitter:title content="openQA and PowerPC"><meta name=twitter:description content="Due to recent changes in the worker configuration of the SUSE internal openQA instance, we needed to reconfigure some of the PowerPC jobs in openQA. This triggered a couple of questions regarding the â€¦"><meta name=twitter:image content="https://openQA-Bites.github.io/img/avatar-icon.png"><meta name=twitter:card content="summary_large_image"><link href=https://openQA-Bites.github.io/img/favicon.ico rel=icon type=image/x-icon><meta name=generator content="Hugo 0.150.1"><link rel=alternate href=https://openQA-Bites.github.io/index.xml type=application/rss+xml title="openQA bites"><link rel=stylesheet href=https://openQA-Bites.github.io/css/katex.min.css><link rel=stylesheet href=https://openQA-Bites.github.io/fontawesome/css/all.css><link rel=stylesheet href=https://openQA-Bites.github.io/css/bootstrap.min.css><link rel=stylesheet href=https://openQA-Bites.github.io/css/main.css><link rel=stylesheet href=https://openQA-Bites.github.io/css/custom.css><link rel=stylesheet href=https://openQA-Bites.github.io/css/fonts.css><link rel=stylesheet href=https://openQA-Bites.github.io/css/syntax.css><link rel=stylesheet href=https://openQA-Bites.github.io/css/codeblock.css><link rel=stylesheet href=https://openQA-Bites.github.io/css/photoswipe.min.css><link rel=stylesheet href=https://openQA-Bites.github.io/css/photoswipe.default-skin.min.css></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=navbar-brand href=https://openQA-Bites.github.io/>openQA bites</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li class=navlinks-container><a class=navlinks-parent role=button tabindex=0>openQA</a><div class=navlinks-children><a href=https://openQA-Bites.github.io/openqa/openqa-cli-cheat-sheet>openqa-cli cheat sheet</a>
<a href=https://openQA-Bites.github.io/posts/2023/2023-02-23-safely_clone_a_job_on_a_production_instance/>cloning jobs on production instance</a></div></li><li><a title=Categories href=https://openQA-Bites.github.io/categories/>Categories</a></li><li><a title=Tags href=https://openQA-Bites.github.io/tags/>Tags</a></li><li><a title=About href=https://openQA-Bites.github.io/about/>About</a></li><li><a title=Related href=https://openQA-Bites.github.io/related/>Related</a></li></ul></div><div class=avatar-container><div class=avatar-img-border><a title="openQA bites" href=https://openQA-Bites.github.io/><img class=avatar-img src=https://openQA-Bites.github.io/img/avatar-icon.png alt="openQA bites"></a></div></div></div></nav><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><h1>openQA and PowerPC</h1><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on November 11, 2024
&nbsp;(Last modified on December 2, 2024)
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;5&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;948&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;phoenix</span></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><p>Due to recent changes in the worker configuration of the SUSE internal openQA instance, we needed to reconfigure some of the PowerPC jobs in openQA. This triggered a couple of questions regarding the availability of openQA worker, worker backends, their differences and their caveats. This blog post should act as a quickstart/overview guide for people getting into OpenQA testing on the PowerPC architecture.</p><p>PowerPC jobs can run in three different modi: as native virtual machines on <strong>PowerVM</strong>, leveraging the full power of PowerPC (pun intended!), as KVM-powered virtual machines, henceforth <strong>KVM on PowerNV</strong> or as <a href=#emulated>emulated PowerPC jobs</a> on non-native PowerVM hardware, e,g. x86_64.
While PowerVM is the only officially recommended way from IBM, in openQA we use KVM on PowerNV successfully for years. OpenQA has backends for PowerVM and KVM on PowerNV but since both comes with different shortcoming, it is difficult to give a recommendation which one to use. Emulated PowerPC jobs should be avoided because they are very slow.</p><h2 id=tldr>TL;DR</h2><ul><li><code>qemu_ppc64le</code> is closer to openQA, while <code>ppc64le_hmc</code> is closer to PowerPC</li><li><code>qemu_ppc64le</code> provides a more openQA feature-complete backend</li><li><code>ppc64le_hmc</code> is more likely to run on more recent hardware (Power10), but comes with caveats (see <a href=#caveats>below</a>)</li><li><code>ppc64le_hmc</code> is not (yet) available on <a href=https://openqa.opensuse.org>openqa.opensuse.org</a></li><li>Emulated PowerPC workers exist, but they are very slow. Details <a href=#emulated>see below</a>.</li></ul><p>When selecting a PowerPC backend, use the <a href=#caveats>caveats section</a> below for a help to decide which backend fits your use case better.</p><h1 id=different-virtual-machine-modi>Different virtual machine modi</h1><p>On PowerPC everything is virtualized. The hardware is designed to be a hypervisor from ground up. Even in OPAL, it&rsquo;s most basic bare-metal configuration, the OS will run as the only VM on the internal hypervisor.</p><p>The internal hypervisor is backed directly by PowerPC and is managed by the VIOS (virtual input output server). VIOS is AIX based IO hub system which runs as a separate essential VM on the PowerPC machine itself. The customary way of managing virtual machines is to use either Novalink or HMC. HMC is an external management solution, typically running on a separate host and able to manage a cluster of PowerPC machines from one single host (similar to a Salt master). Novalink is used as internal management interface from the same host.
Those are just different ways of managing virtual machines on PowerVM.</p><p>For using PowerPC in openQA one does not need to know how the internals work, the backend should abstract this for you away.
For more information on the internals itself, I refer to the <a href="https://www.youtube.com/watch?v=q1CM2AH5aKY">SUSE QE Tools Workshop 2021-02-05 - PowerPC administration</a> recording.</p><h2 id=openqa-provided-backends>OpenQA provided backends</h2><p>openQA provides testing ability on PowerVM using either NovaLink or HMC. PowerPC managed over HMC is the newer backend and should be preferred over Novalink.
This is realized via the <code>ppc64le_hmc</code> backend. Although this is supported and used, those backends come with some limitations compared to the qemu backends, which in turn has also its own caveats. See the dedicated <a href=#caveats>caveats section</a> below for more details.</p><p>KVM on PowerNV is &ldquo;just libvirt/qemu&rdquo;, or &ldquo;just KVM&rdquo; depending on your view. For openQA, KVM on PowerNV is a worker instance spawning <code>qemu</code> virtual machines on a default SUSE/openSUSE Linux installation running on PowerPC.
KVM on PowerNV is provided via the <code>qemu_ppc64le</code> worker class and the most supported backend for PowerPC.
Be aware that our current PowerPC workers for KVM on PowerNV are all based on Power8. It is uncertain if this approach will work on newer Power platforms, e.g. Power9 or Power10.</p><p>The <code>qemu_ppc64le</code> worker class is currently the only PowerPC backend for <a href=https://openqa.opensuse.org>openqa.opensuse.org</a>. It runs on a Power8 machine running openSUSE Leap.</p><p>The caveats for both backends makes it difficult to give a single recommendation. In general one can say that <code>qemu_ppc64le</code> is closer to openQA, while <code>ppc64le_hmc</code> is closer to PowerPC.
The existing <a href=#caveats>caveats for ppc64le_hmc</a> might also help you select a suitable backend for your needs.</p><h2 id=kvm-on-powernv-for-openqa>KVM on PowerNV for openQA</h2><p>KVM on PowerNV is realized by running a default SUSE/openSUSE installation on PowerPC in OPAL/PowerNV mode. OPAL stands for OpenPower Abstraction Layer and is the closes you will get to a bare-metal installation on PowerPC. Only one VM instance is allowed, and it gets full access to the hardware (as far as possible). PowerNV (NV for Non-Virtualized) is the &ldquo;bare-metal&rdquo; platform using the OPAL firmware. This is the run mode for the workers providing <code>qemu_ppc64le</code>.</p><p>Be advised, that the current PowerPC workers for <a href=https://openqa.opensuse.org>openqa.opensuse.org</a> are based on Power8 and the future for PowerNV for Power10 (and later) is uncertain.</p><h2 id=emulated>Emulated PowerPC in openQA</h2><p>OpenQA allows to use qemu-emulated PowerPC virtual machines. They do work but they are very slow. To run an emulated VM, you can use the default <code>qemu_x86_64</code> WORKER_CLASS and then apply the following settings:</p><pre tabindex=0><code>QEMU=ppc64
QEMUCPU=POWER9
QEMU_NO_KVM=1
</code></pre><p>Because those test runs are so slow, consider also using <code>TIMEOUT_SCALE=2</code>. This will increase all timeouts by a factor of two, so you don&rsquo;t need to manually increase timeouts in <code>script_run</code> and for <code>MAX_JOB_TIME</code>, and so on. This is needed, because otherwise those jobs very likely run into various timeout issues.</p><p>Emulated PowerPC jobs do work but are not recommended. Use them only if you really need to.</p><p>This configuration also works for other emulated hardware, e.g. for <a href=https://openQA-Bites.github.io/posts/2022/2022-10-04-emulated_aarch64_worker/>emulated aarch64</a> I wrote about some time ago.</p><h1 id=caveats>Known caveats</h1><ul><li><code>ppc64le_hmc</code> only supports raw images, but not <code>qcow</code> or <code>qcow2</code></li><li><code>ppc64le_hmc</code> cannot publish HDDs from this backend (yet)</li><li><code>ppc64le_hmc</code> is not available on <a href=https://openqa.opensuse.org>openqa.opensuse.org</a></li><li><code>qemu_ppc64le</code> runs only on Power8 and it is uncertain if it will run on Power9 or Power10</li></ul><h2 id=further-links>Further links</h2><ul><li><a href="https://www.youtube.com/watch?v=q1CM2AH5aKY">SUSE QE Tools Workshop 2021-02-05 - PowerPC administration</a></li></ul><h2 id=credits>Credits</h2><p>Big thanks to Nick Singer, for helping to write this blog post!</p><hr><ul><li>Edit 02.12.2024 - Added <a href=#emulated>emulated PowerPC</a>.</li></ul><div class=blog-tags><a href=https://openQA-Bites.github.io/tags/openqa/>openqa</a>&nbsp;
<a href=https://openQA-Bites.github.io/tags/powerpc/>PowerPC</a>&nbsp;</div><hr><section id=social-share><div class="list-inline footer-links"><div class=share-box aria-hidden=true><ul class=share><li><a href="//twitter.com/share?url=https%3a%2f%2fopenQA-Bites.github.io%2fposts%2f2024%2f2024-11-11-openqa_and_powerpc%2f&amp;text=openQA%20and%20PowerPC&amp;via=" target=_blank title="Share on Twitter"><i class="fab fa-twitter"></i></a></li><li><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fopenQA-Bites.github.io%2fposts%2f2024%2f2024-11-11-openqa_and_powerpc%2f" target=_blank title="Share on Facebook"><i class="fab fa-facebook"></i></a></li><li><a href="//reddit.com/submit?url=https%3a%2f%2fopenQA-Bites.github.io%2fposts%2f2024%2f2024-11-11-openqa_and_powerpc%2f&amp;title=openQA%20and%20PowerPC" target=_blank title="Share on Reddit"><i class="fab fa-reddit"></i></a></li><li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fopenQA-Bites.github.io%2fposts%2f2024%2f2024-11-11-openqa_and_powerpc%2f&amp;title=openQA%20and%20PowerPC" target=_blank title="Share on LinkedIn"><i class="fab fa-linkedin"></i></a></li><li><a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fopenQA-Bites.github.io%2fposts%2f2024%2f2024-11-11-openqa_and_powerpc%2f&amp;title=openQA%20and%20PowerPC" target=_blank title="Share on StumbleUpon"><i class="fab fa-stumbleupon"></i></a></li><li><a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fopenQA-Bites.github.io%2fposts%2f2024%2f2024-11-11-openqa_and_powerpc%2f&amp;description=openQA%20and%20PowerPC" target=_blank title="Share on Pinterest"><i class="fab fa-pinterest"></i></a></li></ul></div></div></section></article><ul class="pager blog-pager"><li class=previous><a href=https://openQA-Bites.github.io/posts/2024/2024-08-19-openqa-mq_shows_you_openqas_rabbitmq_events/ data-toggle=tooltip data-placement=top title="openqa-mq shows you openQA's RabbitMQ events">&larr; Previous Post</a></li></ul></div></div></div><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=mailto:felix.niederwanger@suse.de title="Email me"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://github.com/grisu48 title=GitHub><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://linkedin.com/in/felix-niederwanger title=LinkedIn><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a rel=me href=https://chaos.social/@phoenix title=Mastodon><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-mastodon fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="credits copyright text-muted">phoenix
&nbsp;&bull;&nbsp;&copy;
2025
&nbsp;&bull;&nbsp;
<a href=https://openQA-Bites.github.io/>openQA bites</a></p><p class="credits theme-by text-muted"><a href=https://gohugo.io>Hugo v0.150.1</a> powered &nbsp;&bull;&nbsp; Theme <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adapted from <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a></p></div></div></div></footer><script defer src=https://openQA-Bites.github.io/js/katex.min.js></script><script defer src=https://openQA-Bites.github.io/js/auto-render.min.js onload=renderMathInElement(document.body)></script><script src=https://openQA-Bites.github.io/js/jquery-3.7.0.slim.min.js></script><script src=https://openQA-Bites.github.io/js/bootstrap.min.js></script><script src=https://openQA-Bites.github.io/js/main.js></script><script src=https://openQA-Bites.github.io/js/photoswipe.min.js></script><script src=https://openQA-Bites.github.io/js/photoswipe-ui-default.min.js></script><script src=https://openQA-Bites.github.io/js/load-photoswipe.js></script></body></html>